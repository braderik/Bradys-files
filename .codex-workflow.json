{
  "name": "Remote Runner",
  "description": "Run a command or script on my Mac over SSH",
  "env": {
    "TARGET_HOST": "mac-home"
  },
  "inputs": {
    "command": {
      "description": "Remote command to run on the Mac",
      "required": false,
      "default": "bash -lc ~/scripts/backup.sh"
    }
  },
  "steps": [
    {
      "name": "Check Reachability",
      "run": "bash -lc \"nc -zv $(/usr/bin/awk '/HostName/{print $2}' ~/.ssh/config | head -n1) 22 || true\""
    },
    {
      "name": "Run SSH Command",
      "run": "bash -lc 'REMOTE_CMD=\"{{inputs.command}}\" ./run-remote.sh'"
    }
  ]
}
